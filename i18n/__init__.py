"""Simple internationalisation helper for the Gradio interface."""
from __future__ import annotations

from typing import Dict

TRANSLATIONS: Dict[str, Dict[str, str]] = {
    "en": {
        "app_title": "HSPIM - Paper Innovation Analyzer",
        "upload_label": "Upload paper (PDF or MinerU JSON)",
        "enhanced_parsing": "Enable enhanced parsing",
        "language_label": "Interface language",
        "analyze_button": "Analyze",
        "config_tab": "Configuration",
        "analysis_tab": "Analysis",
        "config_save": "Save configuration",
        "config_reload": "Reload",
        "config_description": "Use the form below to adjust model, MinerU, and UI options. Changes are saved to config/ModelConfig.py.",
        "final_score": "Predicted Innovation Score",
        "sections_title": "Section Evaluations",
        "raw_output_title": "Raw Output JSON",
        "error_prefix": "Error",
        "success_config": "Configuration saved successfully.",
        "config_reload_success": "Configuration reloaded from disk.",
        "config_error": "Failed to save configuration: {error}",
        "no_file": "Please upload a paper in PDF or JSON format.",
        "processing": "Processing paper...",
        "mineru_missing": "MinerU API key is required for PDF parsing.",
        "enhanced_enabled": "Enhanced parsing enabled",
        "analysis_summary": "Analysis summary",
        "section_header": "Section",
        "section_question": "Question & Answer",
        "section_scores": "Scores",
        "confidence": "Confidence",
        "reason": "Reason",
        "score": "Score",
        "download_json": "Download JSON",
        "model_section_title": "Model settings",
        "model_provider": "Provider",
        "model_name": "Model name",
        "model_api_key": "API key",
        "model_base_url": "Base URL",
        "model_local_path": "Model path or identifier",
        "model_engine": "Inference engine",
        "model_tensor_parallel": "Tensor parallel size",
        "model_dtype": "Computation dtype",
        "model_trust_remote_code": "Trust remote code",
        "model_gpu_utilization": "GPU memory utilisation",
        "model_chat_template": "Chat template override",
        "model_temperature": "Temperature",
        "model_max_tokens": "Max tokens",
        "model_request_timeout": "Request timeout (s)",
        "model_extra": "Extra parameters (JSON)",
        "general_section_title": "General settings",
        "general_data_dir": "Data directory",
        "general_review_dir": "Review directory",
        "general_output_dir": "Output directory",
        "general_overwrite": "Overwrite existing files",
        "general_max_workers": "Max parallel workers",
        "general_retry_limit": "Retry limit",
        "general_enable_logging": "Enable logging",
        "mineru_section_title": "MinerU settings",
        "mineru_api_key": "MinerU API key",
        "mineru_base_url": "MinerU base URL",
        "mineru_use_ocr": "Enable OCR",
        "mineru_enable_formula": "Detect formulas",
        "mineru_enable_table": "Detect tables",
        "mineru_language": "Document language",
        "ui_section_title": "Interface settings",
        "ui_default_language": "Default interface language",
        "ui_theme": "Theme",
        "ui_enhanced_parsing_default": "Enable enhanced parsing by default",
        "title_label": "Title",
        "authors_label": "Authors",
        "emails_label": "Emails",
    },
    "zh": {
        "app_title": "HSPIM - 论文创新性分析",
        "upload_label": "上传论文（PDF 或 MinerU JSON）",
        "enhanced_parsing": "开启增强解析",
        "language_label": "界面语言",
        "analyze_button": "开始分析",
        "config_tab": "配置",
        "analysis_tab": "分析",
        "config_save": "保存配置",
        "config_reload": "重新加载",
        "config_description": "在下方调整模型、MinerU 与界面设置，保存后会写入 config/ModelConfig.py。",
        "final_score": "预测创新性得分",
        "sections_title": "章节评估",
        "raw_output_title": "原始输出 JSON",
        "error_prefix": "错误",
        "success_config": "配置保存成功。",
        "config_reload_success": "配置已从文件重新加载。",
        "config_error": "保存配置失败：{error}",
        "no_file": "请上传 PDF 或 JSON 格式的论文。",
        "processing": "论文处理中……",
        "mineru_missing": "解析 PDF 需要提供 MinerU API Key。",
        "enhanced_enabled": "已开启增强解析",
        "analysis_summary": "分析总结",
        "section_header": "章节",
        "section_question": "问答内容",
        "section_scores": "评分",
        "confidence": "置信度",
        "reason": "原因",
        "score": "得分",
        "download_json": "下载 JSON",
        "model_section_title": "模型设置",
        "model_provider": "模型提供方",
        "model_name": "模型名称",
        "model_api_key": "API Key",
        "model_base_url": "基础 URL",
        "model_local_path": "模型路径或名称",
        "model_engine": "推理引擎",
        "model_tensor_parallel": "张量并行大小",
        "model_dtype": "计算精度",
        "model_trust_remote_code": "信任远程代码",
        "model_gpu_utilization": "GPU 显存利用率",
        "model_chat_template": "对话模板覆盖",
        "model_temperature": "温度",
        "model_max_tokens": "最大 tokens",
        "model_request_timeout": "请求超时时间（秒）",
        "model_extra": "额外参数（JSON）",
        "general_section_title": "通用设置",
        "general_data_dir": "数据目录",
        "general_review_dir": "评审目录",
        "general_output_dir": "输出目录",
        "general_overwrite": "覆盖已有文件",
        "general_max_workers": "并行工作线程数",
        "general_retry_limit": "重试次数上限",
        "general_enable_logging": "开启日志记录",
        "mineru_section_title": "MinerU 设置",
        "mineru_api_key": "MinerU API Key",
        "mineru_base_url": "MinerU 基础 URL",
        "mineru_use_ocr": "启用 OCR",
        "mineru_enable_formula": "识别公式",
        "mineru_enable_table": "识别表格",
        "mineru_language": "文档语言",
        "ui_section_title": "界面设置",
        "ui_default_language": "默认界面语言",
        "ui_theme": "界面主题",
        "ui_enhanced_parsing_default": "默认启用增强解析",
        "title_label": "标题",
        "authors_label": "作者",
        "emails_label": "邮箱",
    },
}

def translate(key: str, language: str) -> str:
    table = TRANSLATIONS.get(language) or TRANSLATIONS["en"]
    return table.get(key, TRANSLATIONS["en"].get(key, key))
